<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <title>Nginx - Config format</title>
 <script>/* This HTML was generated by ðŸ“œ Scroll v136.11.1. https://scroll.pub */</script>
 <style>@media print {.doNotPrint {display: none !important;}}</style>
 <link rel="canonical" href="https://pldb.io/concepts/nginx-config.html">
 <meta name="viewport" content="width=device-width,initial-scale=1">
 <meta name="description" content="PLDB: a Programming Language Database. Build the next great programming language.">
 <meta name="generator" content="Scroll v136.11.1">
 <meta property="og:title" content="Nginx - Config format">
 <meta property="og:description" content="PLDB: a Programming Language Database. Build the next great programming language.">
 <meta property="og:image" content="">
 
 <link rel="source" type="application/git" title="Source Code Repository" href="https://github.com/breck7/pldb">
 <link rel="alternate" type="application/rss+xml" title="Nginx - Config format" href="../blog/feed.xml">
 <meta name="twitter:card" content="summary_large_image">
</head>
<body>
<link rel="stylesheet" type="text/css" href="../gazette.css"></link>
<link rel="stylesheet" type="text/css" href="../TrueBaseTheme.css"></link>

<div class="trueBaseThemeHeader">
 <a href="../index.html" class="trueBaseThemeLogo">PLDB</a>
 <form style="display:inline-block;" method="get" action="../search.html">
  <input type="search" id="trueBaseThemeHeaderSearch" name="q" placeholder="Search" autocomplete="off"></input>
</form>
 <a href="../lists/top1000.html">Top 1K</a>
 <a href="../lists/features.html">Features</a>
 <a href="../lists/creators.html">Creators</a>
 <a href="../lists/events.html">Events</a>
 <a href="../lists/podcasts.html">Podcasts</a>
 <a href="../books/index.html">Books</a>
 <a href="../lists/extensions.html">Extensions</a>
 <a href="../blog/interviews.html">Interviews</a>
 <a href="../blog/index.html">Blog</a>
 <a href="../lists/explorer.html">Explorer</a>
 <a href="../csv.html">CSV</a>
</div>

<style>.abstractIconButtonParser {position:absolute;top:0.25rem; }.abstractIconButtonParser svg {fill: rgba(204,204,204,.8);width:1.875rem;height:1.875rem; padding: 0 7px;} .abstractIconButtonParser:hover svg{fill: #333;}</style><a href="https://github.com/breck7/pldb/blob/main/concepts/nginx-config.scroll" class="doNotPrint abstractIconButtonParser" style="right:2rem;"><svg xmlns="http://www.w3.org/2000/svg" width="92pt" height="92pt" viewBox="0 0 92 92"><path d="M90.156 41.965 50.036 1.848a5.913 5.913 0 0 0-8.368 0l-8.332 8.332 10.566 10.566a7.03 7.03 0 0 1 7.23 1.684 7.043 7.043 0 0 1 1.673 7.277l10.183 10.184a7.026 7.026 0 0 1 7.278 1.672 7.04 7.04 0 0 1 0 9.957 7.045 7.045 0 0 1-9.961 0 7.038 7.038 0 0 1-1.532-7.66l-9.5-9.497V59.36a7.04 7.04 0 0 1 1.86 11.29 7.04 7.04 0 0 1-9.957 0 7.04 7.04 0 0 1 0-9.958 7.034 7.034 0 0 1 2.308-1.539V33.926a7.001 7.001 0 0 1-2.308-1.535 7.049 7.049 0 0 1-1.516-7.7L29.242 14.273 1.734 41.777a5.918 5.918 0 0 0 0 8.371L41.855 90.27a5.92 5.92 0 0 0 8.368 0l39.933-39.934a5.925 5.925 0 0 0 0-8.371"/></svg></a>
<div class="scrollSection"><h1 class="scrollTitle"><a href="nginx-config.html">Nginx</a></h1>
</div>
<a class="trueBaseThemePreviousItem" href="pl-sql.html">&lt;</a>
<a class="trueBaseThemeNextItem" href="ninja.html">&gt;</a>
<div style="width: 100%; box-sizing: border-box; max-width: 800px; margin: 0 auto;" class="scrollContainerParser">
<div class="trueBaseThemeQuickLinks"><a href="https://en.wikipedia.org/wiki/Nginx"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="98.05px" height="98.05px" viewBox="0 0 98.05 98.05" style="enable-background:new 0 0 98.05 98.05;" xml:space="preserve"><path d="M98.023,17.465l-19.584-0.056c-0.004,0.711-0.006,1.563-0.017,2.121c1.664,0.039,5.922,0.822,7.257,4.327L66.92,67.155 c-0.919-2.149-9.643-21.528-10.639-24.02l9.072-18.818c1.873-2.863,5.455-4.709,8.918-4.843l-0.01-1.968L55.42,17.489 c-0.045,0.499,0.001,1.548-0.068,2.069c5.315,0.144,7.215,1.334,5.941,4.508c-2.102,4.776-6.51,13.824-7.372,15.475 c-2.696-5.635-4.41-9.972-7.345-16.064c-1.266-2.823,1.529-3.922,4.485-4.004v-1.981l-21.82-0.067 c0.016,0.93-0.021,1.451-0.021,2.131c3.041,0.046,6.988,0.371,8.562,3.019c2.087,4.063,9.044,20.194,11.149,24.514 c-2.685,5.153-9.207,17.341-11.544,21.913c-3.348-7.43-15.732-36.689-19.232-44.241c-1.304-3.218,3.732-5.077,6.646-5.213 l0.019-2.148L0,17.398c0.005,0.646,0.027,1.71,0.029,2.187c4.025-0.037,9.908,6.573,11.588,10.683 c7.244,16.811,14.719,33.524,21.928,50.349c0.002,0.029,2.256,0.059,2.281,0.008c4.717-9.653,10.229-19.797,15.206-29.56 L63.588,80.64c0.005,0.004,2.082,0.016,2.093,0.007c7.962-18.196,19.892-46.118,23.794-54.933c1.588-3.767,4.245-6.064,8.543-6.194 l0.032-1.956L98.023,17.465z"/></svg></a> <a href="https://sdk.scroll.pub/designer#url%20https%3A%2F%2Fpldb.io%2Fpldb.parsers%0AprogramUrl%20https%3A%2F%2Fpldb.io%2Fconcepts%2Fnginx-config.scroll" class="material-symbols-outlined">edit</a></div>
<p class="scrollParagraph">Nginx is an open source <a href="../lists/explorer.html#searchBuilder=%7B%22criteria%22%3A%5B%7B%22condition%22%3A%22contains%22%2C%22data%22%3A%22tags%22%2C%22origData%22%3A%22tags%22%2C%22type%22%3A%22string%22%2C%22value%22%3A%5B%22configFormat%22%5D%7D%5D%2C%22logic%22%3A%22AND%22%7D">config format</a> created in <a href="../lists/explorer.html#searchBuilder=%7B%22criteria%22%3A%5B%7B%22condition%22%3A%22%3D%22%2C%22data%22%3A%22appeared%22%2C%22origData%22%3A%22appeared%22%2C%22tags%22%3A%22num%22%2C%22value%22%3A%5B%222004%22%5D%7D%5D%2C%22logic%22%3A%22AND%22%7D">2004</a>.</p>
<table class="scrollDashboard"><tr><td>#218<span>on PLDB</span></td>
<td>20<span>Years Old</span></td>
<td>6k<span><span title="Nginx repos on GitHub.">Repos</span></span></td></tr>
</table>
<a href="https://en.wikipedia.org/wiki/Nginx">Wikipedia</a> Â· <a href="https://nginx.org/en/docs/ https://devdocs.io/nginx/">Docs</a>
<p class="scrollParagraph">Nginx (  EN-jin-EKS) (stylized as NGINX, NGiÐ˜X or nginx) is a web server which can also be used as a reverse proxy, load balancer, mail proxy and HTTP cache.  The software was created by Igor Sysoev and first publicly released in 2004. A company of the same name was founded in 2011 to provide support and Nginx plus paid software.Nginx is free and open-source software, released under the terms of a BSD-like license. <a href="https://en.wikipedia.org/wiki/Nginx">Read more on Wikipedia...</a></p>
<ul ><li >Tags: <a href='../lists/explorer.html#searchBuilder=%7B"criteria"%3A%5B%7B"condition"%3A"contains"%2C"data"%3A"tags"%2C"origData"%3A"tags"%2C"type"%3A"string"%2C"value"%3A%5B"configFormat"%5D%7D%5D%2C"logic"%3A"AND"%7D'>configFormat</a></li>
<li >There are at least 5,905 Nginx repos on <a href="https://github.com/search?q=language:Nginx">GitHub</a></li>
<li >Early development of Nginx happened in <a href="../lists/labs.html#q=F5, Inc">F5, Inc</a></li>
<li >The  Google BigQuery Public Dataset GitHub snapshot shows 8k users using Nginx in 9k repos on <a href="https://api.github.com/search/repositories?q=language:Nginx">GitHub</a></li>
<li ><a href="codemirror.html">CodeMirror</a> <a href="https://github.com/codemirror/codemirror5/tree/master/mode/nginx">package</a> for syntax highlighting Nginx</li>
<li ><a href="pygments.html">Pygments</a> supports <a href="https://github.com/pygments/pygments/blob/master/pygments/lexers/configs.py">syntax highlighting</a> for Nginx</li>
<li >GitHub supports <a href="https://github.com/brandonwamboldt/sublime-nginx" title="The package used for syntax highlighting by GitHub Linguist.">syntax highlighting</a> for Nginx</li>
<li >Indeed.com has 2,884 matches for <a href="https://www.indeed.com/jobs?q=nginx engineer">"nginx engineer"</a>.</li>
<li >See also: (5 related languages) <a href="c.html">C</a>, <a href="linux.html">Linux</a>, <a href="solaris.html">Solaris</a>, <a href="tls.html">TLS</a>, <a href="wordpress.html">WordPress</a></li></ul>
<br>
<div class="codeWithHeader"><div class="codeHeader">Example from the web:</div><code class="scrollCodeBlock">#user  nobody;
worker_processes  1;

#error_log  logs/error.log;
#pid   /run/nginx.pid;

events {
    worker_connections  1024;
}

http {
      include /etc/nginx/mime.types;
      gzip  on;
      gzip_http_version 1.1;
      gzip_comp_level 2;
      gzip_types text/plain text/html text/css
                      application/x-javascript text/xml
                      application/xml application/xml+rss
                      text/javascript;

server {
                listen       80;
                server_name  localhost;
                access_log  logs/localhost.access.log  main;
                location / {
                    root   html;
                    index  index.html index.htm;
                }
        include /etc/nginx/sites-enabled/*;
        }
}</code></div>
<div class="codeWithHeader"><div class="codeHeader">Example from <a href='https://github.com/brandonwamboldt/sublime-nginx'>Linguist</a>:</div><code class="scrollCodeBlock"># Move the www people to no-www
server {
  listen 80;
  server_name www.example.com;
  return 301 $scheme://example.com$request_uri;
}

server {
  listen 80;
  listen 443 ssl;
  server_name example.com;

  # Certs sent to the client in SERVER HELLO are concatenated in ssl_certificate
  ssl_certificate /srv/www/example.com/ssl/example.com.crt;
  ssl_certificate_key /srv/www/example.com/ssl/example.com.key;
  
  # Allow multiple connections to use the same key data
  ssl_session_timeout 5m;
  ssl_session_cache shared:SSL:50m;
  
  # Diffie-Hellman parameter for DHE ciphersuites, recommended 2048 bits
  ssl_dhparam /etc/ssl/certs/dhparam.pem;

  # Intermediate configuration. tweak to your needs
  ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
  include snippets/ssl_ciphers_intermediate.conf;
  ssl_prefer_server_ciphers on;

  # HSTS (ngx_http_headers_module is required) (15768000 seconds = 6 months)
  #add_header Strict-Transport-Security max-age=15768000;

  # OCSP Stapling - fetch OCSP records from URL in ssl_certificate and cache them
  ssl_stapling on;
  ssl_stapling_verify on;

  # Verify chain of trust of OCSP response using Root CA and Intermediate certs
  ssl_trusted_certificate /srv/www/example.com/ssl/unified-ssl.crt;
  resolver 8.8.8.8 8.8.4.4;
  resolver_timeout 10s;

  root /srv/www/example.com/htdocs;
  index index.php index.html index.htm;
  charset UTF-8;
  autoindex off;
  
  # Deny access based on HTTP method (set in HTTP level)
  if ($bad_method = 1) {
    return 444;
  }

  # Show &quot;Not Found&quot; 404 errors in place of &quot;Forbidden&quot; 403 errors, because
  # forbidden errors allow attackers potential insight into your server&#39;s
  # layout and contents
  error_page 403 = 404;

  # It&#39;s always good to set logs, note however you cannot turn off the error log
  # setting error_log off; will simply create a file called &#39;off&#39;.
  access_log /var/log/nginx/example.com.access.log;
  error_log /var/log/nginx/example.com.error.log;

  # Add trailing slash to */wp-admin requests.
  rewrite /wp-admin$ $scheme://$host$uri/ permanent;

  location / {
    # This try_files directive is used to enable pretty, SEO-friendly URLs
    # and permalinks for Wordpress. Leave it *off* to start with, and then
    # turn it on once you&#39;ve gotten Wordpress configured!
    try_files $uri $uri/ /index.php?$args;
  }

  # Option to create password protected directory
  # http://www.howtoforge.com/basic-http-authentication-with-nginx
  # location /admin {
  #   auth_basic &quot;Administrator Login&quot;;
  #   auth_basic_user_file /var/www/domain.com/admin/.htpasswd;
  # }

  # Do not log access to these to keep the logs cleaner
  location = /favicon.ico {
    log_not_found off;
    access_log off;
  }

  location = /apple-touch-icon.png {
    log_not_found off;
    access_log off;
  }

  location = /apple-touch-icon-precomposed.png {
    log_not_found off;
    access_log off;
  }

  # This block will catch static file requests, such as images, css, js
  # The ?: prefix is a &#39;non-capturing&#39; mark, meaning we do not require
  # the pattern to be captured into $1 which should help improve performance
  location ~* \.(?:3gp|gif|jpg|jpe?g|png|ico|wmv|avi|asf|asx|mpg|mpeg|mp4|pls|mp3|mid|wav|swf|flv|html|htm|txt|js|css|exe|zip|tar|rar|gz|tgz|bz2|uha|7z|doc|docx|xls|xlsx|pdf|iso|woff)$ {
    # Some basic cache-control for static files to be sent to the browser
    expires max;
    add_header Pragma public;
    add_header Cache-Control &quot;public, must-revalidate, proxy-revalidate&quot;;
  }

  # Deny all attempts to access hidden files such as .htaccess, .htpasswd, .DS_Store (Mac).
  # Keep logging the requests to parse later (or to pass to firewall utilities such as fail2ban)
  location ~ /\. {
    access_log off;
    log_not_found off;
    deny all;
  }

  location ~ ~$ {
    access_log off;
    log_not_found off;
    deny all;
  }

  # Common deny or internal locations, to help prevent access to areas of
  # the site that should not be public
  location ~* wp-admin/includes {
    deny all;
  }

  location ~* wp-includes/theme-compat/ {
    deny all;
  }

  location ~* wp-includes/js/tinymce/langs/.*\.php {
    deny all;
  }

  location /wp-content/ {
    internal;
  }

  # Deny access to any files with a .php extension in the uploads directory
  # Works in sub-directory installs and also in multisite network
  # Keep logging the requests to parse later (or to pass to firewall utilities such as fail2ban)
  location ~* /(?:uploads|files)/.*\.php$ {
    deny all;
  }

  # Make sure these get through, esp with dynamic WP sitmap plugin
  location = /robots.txt {
    try_files $uri /index.php;
  }

  location = /sitemap.xml {
    try_files $uri /index.php;
  }

  location = /sitemap.xml.gz {
    try_files $uri /index.php;
  }

  # Fix for Firefox issue with cross site font icons
  location ~* \.(eot|otf|ttf|woff)$ {
    add_header Access-Control-Allow-Origin *;
  }

  # Redirect server error pages to the static page /50x.html
  # Make sure 50x.html exists at that location
  error_page 500 502 503 504 /50x.html;
    location = /50x.html {
    root /usr/share/nginx/html;
    }

  # Cache everything by default
  set $skip_cache 0;

  # POST requests and urls with a query string should always go to PHP
  if ($request_method = POST) {
    set $skip_cache 1;
  }
  if ($query_string != &quot;&quot;) {
    set $skip_cache 1;
  }

  # Don&#39;t cache uris containing the following segments
  if ($request_uri ~* &quot;/wp-admin/|/xmlrpc.php|wp-.*.php|/feed/|index.php|sitemap(_index)?.xml&quot;) {
    set $skip_cache 1;
  }

  # Don&#39;t use the cache for logged in users or recent commenters
  if ($http_cookie ~* &quot;comment_author|wordpress_[a-f0-9]+|wp-postpass|wordpress_no_cache|wordpress_logged_in&quot;) {
    set $skip_cache 1;
  }

  # Pass all .php files onto a php-fpm/php-fcgi server.
  location ~ [^/]\.php(/|$) {
    # regex to split $uri to $fastcgi_script_name and $fastcgi_path
    fastcgi_split_path_info ^(.+\.php)(/.+)$;

    # Check that the PHP script exists before passing it
    try_files $fastcgi_script_name =404;

    # Bypass the fact that try_files resets $fastcgi_path_info
    # see: http://trac.nginx.org/nginx/ticket/321
    set $path_info $fastcgi_path_info;
    fastcgi_param PATH_INFO $path_info;

    fastcgi_pass unix:/var/run/example.com.sock;
    fastcgi_index index.php;
    # Uncomment if site is HTTPS
    #fastcgi_param HTTPS on;
    include fastcgi.conf;
    
    fastcgi_cache_bypass $skip_cache;
    fastcgi_no_cache $skip_cache;

    fastcgi_cache WORDPRESS;
    fastcgi_cache_valid  60m;
  }

  location ~ /purge(/.*) {
    fastcgi_cache_purge WORDPRESS &quot;$scheme$request_method$host$1&quot;;
  }

  # Use this block if PHPMyAdmin is enabled for this domain
  location /phpmyadmin {
    root /usr/share/;
    index index.php index.html index.htm;

    location ~ ^/phpmyadmin/(.+\.php)$ {
      try_files $uri =404;
      root /usr/share/;
      fastcgi_pass unix:/var/run/example.com.sock;
      fastcgi_index index.php;
      include fastcgi.conf;
    }

    location ~* ^/phpmyadmin/(.+\.(jpg|jpeg|gif|css|png|js|ico|html|xml|txt))$ {
      root /usr/share/;
    }
  }

  location /phpMyAdmin {
    rewrite ^/* /phpmyadmin last;
  }
  # End PHPMyAdmin block

} # End of server block.</code></div>
<div class="scrollSection"><h2 class="scrollParagraph">Language <a href="../lists/features.html">features</a></h2>
</div>
<table id="table472" class="scrollTable">
 <thead><tr><th>Feature</th>

<th>Supported</th>

<th>Example</th>

<th>Token</th>
</tr></thead>
 <tbody><tr><td><a href="../features/hasComments.html">Comments</a></td>
<td><span class="hasFeature">âœ“</span></td>
<td>
# A comment</td>
<td></td>
</tr>
<tr><td><a href="../features/hasLineComments.html">Line Comments</a></td>
<td><span class="hasFeature">âœ“</span></td>
<td>
# A comment</td>
<td>#</td>
</tr>
<tr><td><a href="../features/hasSemanticIndentation.html">Semantic Indentation</a></td>
<td><span class="doesNotHaveFeature">X</span></td>
<td></td>
<td></td>
</tr>
<tr><td><a href="../features/hasMultiLineComments.html">MultiLine Comments</a></td>
<td><span class="doesNotHaveFeature">X</span></td>
<td></td>
<td></td>
</tr></tbody>
 </table>
<div class="scrollKeyboardNav" style="display:none;"><a href="pl-sql.html">pl-sql.html</a> Â· nginx-config.html Â· <a href="ninja.html">ninja.html</a><script>document.addEventListener('keydown', function(event) {
  if (document.activeElement !== document.body) return
  if (event.altKey || event.ctrlKey || event.metaKey || event.shiftKey) return // dont interfere with keyboard back button shortcut
  const getLinks = () => document.getElementsByClassName("scrollKeyboardNav")[0].getElementsByTagName("a")
  if (event.key === "ArrowLeft")
    getLinks()[0].click()
  else if (event.key === "ArrowRight")
    getLinks()[1].click()
 });</script></div>
</div>
<div class="abstractTextLinkParser"><a href="https://github.com/breck7/pldb/blob/main/concepts/nginx-config.scroll">View source</a></div>
<script>
document.addEventListener("DOMContentLoaded", () => document.querySelectorAll(".scrollCodeBlock").forEach(block =>
 {
  if (!navigator.clipboard) return
  const button = document.createElement("span")
  button.classList.add("scrollCopyButton")
  block.appendChild(button)
  button.addEventListener("click", async () => {
    await navigator.clipboard.writeText(block.innerText)
    button.classList.add("scrollCopiedButton")
  })
 }
))
</script>


<div class="trueBaseThemeFooter">
 <a href="../index.html" class="trueBaseThemeLogo">PLDB</a>
 <span>- Build the next great programming language</span>
 <span>Â·</span>
 <a href="../pages/about.html">About</a>
 <span>Â·</span>
 <a href="../search.html">Search</a>
 <span>Â·</span>
 <a href="../lists/keywords.html">Keywords</a>
 <span>Â·</span>
 <a href="../lists/live.html">Livestreams</a>
 <span>Â·</span>
 <a href="../lists/labs.html">Labs</a>
 <span>Â·</span>
 <a href="../lists/resources.html">Resources</a>
 <span>Â·</span>
 <a href="../pages/acknowledgements.html">Acknowledgements</a>
 <span>Â·</span>
 <a href="https://wws.scroll.pub">Part of the World Wide Scroll</a>
</div>

<script src="../lists/autocompleteCombined.js"></script>
<script>document.addEventListener("DOMContentLoaded", evt => initAutocomplete("trueBaseThemeHeaderSearch"))</script></div>
</body>
</html>