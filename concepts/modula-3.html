<!DOCTYPE html>
<html lang="en">
<head>
 <meta charset="utf-8">
 <title>Modula-3 - Programming language</title>
 <script>/* This HTML was generated by ðŸ“œ Scroll v102.3.0. https://scroll.pub */</script>
 <style>@media print {.doNotPrint {display: none !important;}}</style>
 <link rel="canonical" href="https://pldb.io/concepts/modula-3.html">
 <meta name="viewport" content="width=device-width,initial-scale=1">
 <meta name="description" content="PLDB: a Programming Language Database. Build the next great programming language.">
 <meta name="generator" content="Scroll v102.3.0">
 <meta property="og:title" content="Modula-3 - Programming language">
 <meta property="og:description" content="PLDB: a Programming Language Database. Build the next great programming language.">
 <meta property="og:image" content="">
 <link rel="alternate" type="application/rss+xml" title="Modula-3 - Programming language" href="https://pldb.io/blog/feed.xml">
 <meta name="twitter:card" content="summary_large_image">
</head>
<body>
<style>
figure {
  margin: 0;
  padding: 0;
}
.dropcap:first-letter {
  font-size: 3rem;
  line-height: .9em;
  margin-right: .125rem;
  display: block;
  float: left;
}
.dinkus {
  text-align: center;
  padding: 1rem;
}
.dinkus span {
  vertical-align: sub;
}
details {
  margin-top: 10px;
}
summary {
  font-family: "SF Pro", "Helvetica Neue", "Segoe UI", "Arial";
  cursor: pointer;
}
.scrollCaptionedFigure {
  display: block;
  break-inside: avoid;
  text-align: center;
}
.scrollCaptionedFigure img {
  max-width: 100%;
  height: auto;
  margin-top: .1875rem;
}
.scrollCaptionedFigure figcaption {
  font-family: "SF Pro", "Helvetica Neue", "Segoe UI", "Arial";
  font-size: .8rem;
}
.scrollCaptionedFigure figcaption .scrollParagraph {
  margin-top: 0;
}
.scrollCodeBlock {
  overflow: auto;
  font-size: .8rem;
  hyphens: none;
  white-space: pre;
  break-inside: avoid;
  display: block;
  margin: .5rem 0;
  padding: .5rem;
  border-radius: 0;
  position: relative;
}
.scrollCodeBlock:hover .scrollCopyButton {
  opacity: .5;
}
.scrollCodeBlock:hover .scrollCopyButton:hover {
  opacity: .8;
}
.scrollCodeBlock:hover .scrollCopyButton:active {
  opacity: 1;
}
.scrollCopyButton {
  position: absolute;
  top: .125rem;
  right: .125rem;
  font-size: .875rem;
  cursor: pointer;
  opacity: 0;
}
.scrollCopyButton::after {
  content: "[ ]";
}
.scrollCopiedButton::after {
  content: "[âœ“]";
}
html,body,div,span,p,ol,ul,li,table,figure {
  margin: 0;
  padding: 0;
  border: 0;
  vertical-align: baseline;
  border-spacing: 0;
}
ol,ul {
  padding-left: 1rem;
}
li {
  margin-top: .4rem;
  line-height: 1.4;
}
a {
  text-decoration-color: transparent;
}
a:hover {
  text-decoration-color: initial;
}
sup,sub {
  vertical-align: baseline;
  position: relative;
  top: -.375rem;
}
sub {
  top: .375rem;
}
html {
  padding: .25rem;
  background-color: rgb(244,244,244);
  font-family: Exchange,Georgia,serif;
  color: #000;
  font-size: var(--base-font-size, 16px);
  hyphens: auto;
}
p {
  margin-top: .4rem;
  line-height: 1.4rem;
}
.scrollQuote {
  break-inside: avoid;
  display: block;
  margin: .5rem 0;
  padding: .5rem;
  background: rgba(204,204,204,.5);
  white-space: pre-line;
  border-left: .5rem solid rgba(204,204,204,.8);
}
code {
  font-size: .9rem;
  background-color: rgba(204,204,204,.5);
  padding: .125rem .25rem;
  border-radius: .25rem;
}
.scrollParagraph {
  text-align: justify;
}
.scrollColumns {
  column-count: auto;
  column-fill: balance;
  column-width: 35ch;
  column-gap: 1.5rem;
  padding-left: 1.25rem;
  padding-right: 1.25rem;
  margin: auto;
}
.scrollSnippetContainer {
  padding: 1ch 0;
  break-inside: avoid;
  text-align: justify;
}
h1,h2,h3,h4 {
  margin: .625rem 0;
}
h1 {
  font-size: 1.25rem;
}
h2 {
  font-size: 1.125rem;
}
h3,h4 {
  font-size: 1rem;
}
h1.scrollTitle {
  text-align: center;
  margin: auto;
  margin-bottom: .15625rem;
  margin-top: 0;
  font-size: 1.75rem;
  max-width: calc(100vw - 2 * (1.5625rem + 1.875rem));
}
h1.scrollTitle a {
  color: #000;
}
.scrollDateline {
  font-style: italic;
  line-height: 1.4rem;
  font-size: .75rem;
}
.scrollSection {
  break-inside: avoid;
}
.scrollSection h1,.scrollSection h2,.scrollSection h3,.scrollSection h4 {
  text-align: center;
}
h4.scrollQuestion {
  text-align: left;
  margin: 1.4rem 0 0 0;
}
.scrollSection:first-child h1,.scrollSection:first-child h2,.scrollSection:first-child h3,.scrollSection:first-child h4 {
  margin-top: 0;
}
.scrollSection:first-child h4.scrollQuestion {
  margin-top: 0;
}
.scrollNoteLink {
  opacity: .4;
  text-decoration: none;
}
.scrollNoteLink:hover {
  opacity: 1;
}
.scrollFootNoteUsageLink {
  opacity: .7;
  text-decoration: none;
}
.scrollFootNoteUsageLink:hover {
  opacity: 1;
}
.scrollHoverNote {
  text-decoration: underline dashed 1px rgba(0,0,0,.1);
  cursor: default;
}
.scrollCodeBlock {
  border-left: .5rem solid rgba(204,204,204,.8);
}
.scrollTable {
  table-layout: fixed;
  font-family: "SF Pro", "Helvetica Neue", "Segoe UI", "Arial";
  margin: .5rem 0;
  overflow: hidden;
  font-size: .8rem;
  width: 100%;
  hyphens: none;
  border: 1px solid rgba(224,224,224,.8);
}
.scrollTable td,.scrollTable th {
  padding: .1875rem;
  overflow: hidden;
  white-space: nowrap;
}
.scrollTable th {
  text-transform: capitalize;
  border-bottom: 2px solid rgba(0,0,0,.6);
  text-align: left;
}
.scrollTable td {
  cursor: zoom-in;
}
.scrollTable tr:nth-child(even) {
  background: rgba(224,224,224,.6);
}
.scrollTable.expandedTable {
  table-layout: unset;
  background: white;
  position: relative;
  z-index: 10;
  overflow: unset;
}
.scrollTable.expandedTable td,.scrollTable.expandedTable th {
  overflow: unset;
  white-space: unset;
}
.scrollTable.expandedTable td {
  cursor: zoom-out;
}
.scrollByLine {
  font-size: .875rem;
  font-style: italic;
  margin: .25rem 0;
  text-align: center;
}
.scrollViewSource {
  text-align: center;
  font-family: Verdana;
  font-weight: 100;
}
.scrollViewSource a {
  color: rgba(204,204,204,.5);
}
.scrollViewSource a:hover {
  color: #333;
}
.scrollContinueReadingLink {
  display: block;
  text-align: center;
}
.scrollDashboard {
  width: 100%;
  font-size: 1.875rem;
  text-align: center;
  font-weight: bold;
  break-inside: avoid;
  margin-top: .5rem;
  margin-bottom: .5rem;
}
.scrollDashboard td {
  width: 33.3%;
  border: 1px solid #e8e8e8;
}
.scrollDashboard span {
  font-size: 1.25rem;
  display: block;
}
.scrollChat span {
  font-family: Verdana;
  margin-top: .3125rem;
  padding: .3125rem 1.25rem;
  border-radius: .9375rem;
  display: inline-block;
}
.scrollChatLeft span {
  background: rgba(204,204,204, .5);
}
.scrollChatRight span {
  color: white;
  background: rgb(0,132,255);
}
.scrollYouTubeHolder {
  position: relative;
  width: 100%;
  height: 0;
  padding-bottom: 56.25%;
}
.scrollYouTubeEmbed {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

</style>
<style>/* Index page */
.pldbHomepageLink a{
  color: #000;
}
.newPostLink {
 line-height: 1.3em;
}
.singleColumn {
 max-width: 800px;
 margin: auto;
}
.hasFeature {
  color: green;
}
.doesNotHaveFeature {
  color: red;
}
.keywordsBlock .scrollCodeBlock {
  white-space: normal;
}
#monacoContainer {
  display: block;
  height: 10em;
  border: 1px solid grey;
  margin-top: 8px;
}
li.scrollParagraph {
 margin: 0;
}</style>
<link rel="stylesheet" type="text/css" href="../gazette.css"></link>
<link rel="stylesheet" type="text/css" href="../TrueBaseTheme.css"></link>

<div class="trueBaseThemeHeader">
 <a href="../index.html" class="trueBaseThemeLogo">PLDB</a>
 <form style="display:inline-block;" method="get" action="../lists/explorer.html">
  <input type="search" id="trueBaseThemeHeaderSearch" name="q" placeholder="Search" autocomplete="off"></input>
</form>
 <a href="../lists/top1000.html">Top 1,000</a>
 <a href="../lists/features.html">Features</a>
 <a href="../lists/creators.html">Creators</a>
 <a href="../lists/podcasts.html">Podcasts</a>
 <a href="../lists/extensions.html">Extensions</a>
 <a href="../blog/index.html">Blog</a>
 <a href="../lists/explorer.html">Explorer</a>
 <a href="../csv.html">CSV</a>
 <a href="../download.html">Download</a>
</div>

<a class="trueBaseThemeGitHubTopRight" href="https://github.com/breck7/pldb"><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12  5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422  18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305  3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0  1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12  3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0  .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>

<div class="scrollSection"><h1 class="scrollTitle"><a href="modula-3.html">Modula-3</a></h1>
</div>
<a class="trueBaseThemePreviousItem" href="ooc.html">&lt;</a>
<a class="trueBaseThemeNextItem" href="xojo.html">&gt;</a>
<div class="scrollColumns" style="column-width:90ch;column-count:1;max-width:90ch;">
<div class="trueBaseThemeQuickLinks"><a href="http://www.modula3.org" class="material-symbols-outlined">home</a> <a href="https://modula3.elegosoft.com/cm3/doc/tutorial/m3/m3_toc.html" class="material-symbols-outlined">menu_book</a> <a href="https://en.wikipedia.org/wiki/Modula-3"><svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="98.05px" height="98.05px" viewBox="0 0 98.05 98.05" style="enable-background:new 0 0 98.05 98.05;" xml:space="preserve"><path d="M98.023,17.465l-19.584-0.056c-0.004,0.711-0.006,1.563-0.017,2.121c1.664,0.039,5.922,0.822,7.257,4.327L66.92,67.155 c-0.919-2.149-9.643-21.528-10.639-24.02l9.072-18.818c1.873-2.863,5.455-4.709,8.918-4.843l-0.01-1.968L55.42,17.489 c-0.045,0.499,0.001,1.548-0.068,2.069c5.315,0.144,7.215,1.334,5.941,4.508c-2.102,4.776-6.51,13.824-7.372,15.475 c-2.696-5.635-4.41-9.972-7.345-16.064c-1.266-2.823,1.529-3.922,4.485-4.004v-1.981l-21.82-0.067 c0.016,0.93-0.021,1.451-0.021,2.131c3.041,0.046,6.988,0.371,8.562,3.019c2.087,4.063,9.044,20.194,11.149,24.514 c-2.685,5.153-9.207,17.341-11.544,21.913c-3.348-7.43-15.732-36.689-19.232-44.241c-1.304-3.218,3.732-5.077,6.646-5.213 l0.019-2.148L0,17.398c0.005,0.646,0.027,1.71,0.029,2.187c4.025-0.037,9.908,6.573,11.588,10.683 c7.244,16.811,14.719,33.524,21.928,50.349c0.002,0.029,2.256,0.059,2.281,0.008c4.717-9.653,10.229-19.797,15.206-29.56 L63.588,80.64c0.005,0.004,2.082,0.016,2.093,0.007c7.962-18.196,19.892-46.118,23.794-54.933c1.588-3.767,4.245-6.064,8.543-6.194 l0.032-1.956L98.023,17.465z"/></svg></a> <a href="https://sdk.scroll.pub/designer#url%20https%3A%2F%2Fpldb.io%2Fpldb.parsers%0AprogramUrl%20https%3A%2F%2Fpldb.io%2Fconcepts%2Fmodula-3.scroll" class="material-symbols-outlined">edit</a></div>
<p class="scrollParagraph">Modula-3 is an open source <a href="../lists/explorer.html#searchBuilder=%7B%22criteria%22%3A%5B%7B%22condition%22%3A%22%3D%22%2C%22data%22%3A%22tags%22%2C%22origData%22%3A%22tags%22%2C%22tags%22%3A%22string%22%2C%22value%22%3A%5B%22pl%22%5D%7D%5D%2C%22logic%22%3A%22AND%22%7D">programming language</a> created in <a href="../lists/explorer.html#searchBuilder=%7B%22criteria%22%3A%5B%7B%22condition%22%3A%22%3D%22%2C%22data%22%3A%22appeared%22%2C%22origData%22%3A%22appeared%22%2C%22tags%22%3A%22num%22%2C%22value%22%3A%5B%221986%22%5D%7D%5D%2C%22logic%22%3A%22AND%22%7D">1986</a> by <a href="../lists/creators.html#q=Luca%20Cardelli">Luca Cardelli</a> and <a href="../lists/creators.html#q=James%20Donahue">James Donahue</a> and <a href="../lists/creators.html#q=Lucille%20Glassman">Lucille Glassman</a> and <a href="../lists/creators.html#q=Mick%20Jordan">Mick Jordan</a> and <a href="../lists/creators.html#q=Bill%20Kalsow">Bill Kalsow</a> and <a href="../lists/creators.html#q=Greg%20Nelson">Greg Nelson</a>.</p>
<table class="scrollDashboard"><tr><td>#382<span>on PLDB</span></td>
<td>38<span>Years Old</span></td>
<td>137<span><span title="Modula-3 repos on GitHub.">Repos</span></span></td></tr>
</table>
<div id="monacoContainer"></div>
  <script defer src="../node_modules/monaco-editor/min/vs/loader.js"></script>
  <script>
  document.addEventListener("DOMContentLoaded", function () {
  require.config({ paths: { vs: '../node_modules/monaco-editor/min/vs' } })
  require(["vs/editor/editor.main"], function() {
    monaco.editor.create(document.getElementById('monacoContainer'), {
        value: `MODULE HelloWorld;\nIMPORT Io;\nBEGIN\n    IO.Put ("Hello World\n")\nEND HelloWorld.`,
        language: 'm3',
        minimap: {
          enabled: false
      },
      scrollbar: {
          vertical:"hidden",
          horizontal: "hidden",
          handleMouseWheel:false,
      },
      overviewRulerLanes: 0,
      hideCursorInOverviewRuler: true,
      overviewRulerBorder: false,
      wordWrap: 'on',
      //lineNumbers: 'off',
    glyphMargin: false,
    folding: false,
    // Undocumented see https://github.com/Microsoft/vscode/issues/30795#issuecomment-410998882
    lineDecorationsWidth: 10,
    lineNumbersMinChars: 2
      });
    });
    })
  </script>
<p class="scrollParagraph">Modula-3 is a programming language conceived as a successor to an upgraded version of Modula-2 known as Modula-2+. While it has been influential in research circles (influencing the designs of languages such as Java, C#, and Python) it has not been adopted widely in industry. It was designed by Luca Cardelli, James Donahue, Lucille Glassman, Mick Jordan (before at the Olivetti Software Technology Laboratory), Bill Kalsow and Greg Nelson at the Digital Equipment Corporation (DEC) Systems Research Center (SRC) and the Olivetti Research Center (ORC) in the late 1980s. <a href="https://en.wikipedia.org/wiki/Modula-3">Read more on Wikipedia...</a></p>
<ul ><li ><a href="http://www.modula3.org">Modula-3 website</a></li>
<li >Modula-3 appears in categories: <a href='../lists/explorer.html#searchBuilder=%7B"criteria"%3A%5B%7B"condition"%3A"contains"%2C"data"%3A"tags"%2C"origData"%3A"tags"%2C"type"%3A"string"%2C"value"%3A%5B"pl"%5D%7D%5D%2C"logic"%3A"AND"%7D'>programming language</a></li>
<li ><a href="http://www.opencm3.net/download.html">Modula-3 downloads page</a></li>
<li ><a href="https://en.wikipedia.org/wiki/Modula-3">Modula-3 Wikipedia page</a></li>
<li ><a href="https://modula3.elegosoft.com/cm3/doc/tutorial/m3/m3_toc.html">Modula-3 docs</a></li>
<li >There are at least 137 Modula-3 repos on <a href="https://github.com/search?q=language:Modula-3">GitHub</a></li>
<li >Modula-3 first developed in <a href="../lists/originCommunities.html#q=Digital Equipment Corporation">Digital Equipment Corporation</a> and <a href="../lists/originCommunities.html#q=elego Software Solutions GmbH">elego Software Solutions GmbH</a></li>
<li >The  Google BigQuery Public Dataset GitHub snapshot shows 18 users using Modula-3 in 19 repos on <a href="https://api.github.com/search/repositories?q=language:Modula-3">GitHub</a></li>
<li >Explore Modula-3 snippets on <a href="http://www.rosettacode.org/wiki/Category:Modula-3">Rosetta Code</a></li>
<li ><a href="https://hopl.info/showlanguage.prx?exp=1411">Modula-3 on HOPL</a></li>
<li >Modula-3 appears in the <a href="https://www.tiobe.com/tiobe-index/">TIOBE Index</a></li>
<li ><a href="monaco.html">Monaco</a> <a href="https://github.com/microsoft/monaco-editor/tree/main/src/basic-languages/m3">package</a> for syntax highlighting Modula-3</li>
<li >GitHub supports <a href="https://github.com/newgrammars/m3" title="The package used for syntax highlighting by GitHub Linguist.">syntax highlighting</a> for Modula-3</li>
<li ><a href="http://www.opencm3.net/releng/relnotes-5.8.6.html">Release Notes for Modula-3</a></li>
<li ><a href="http://www.modula3.org">modula3.org</a> was registered in 2007</li>
<li >See also: (17 related languages)<a href="modula-2.html">Modula-2</a>, <a href="pascal.html">Pascal</a>, <a href="algol.html">Algol</a>, <a href="oberon.html">Oberon</a>, <a href="java.html">Java</a>, <a href="python.html">Python</a>, <a href="caml.html">Caml</a>, <a href="csharp.html">C#</a>, <a href="nim.html">Nim</a>, <a href="arm.html">ARM</a>, <a href="mesa.html">Mesa</a>, <a href="object-pascal.html">Object Pascal</a>, <a href="euclid.html">Euclid</a>, <a href="c.html">C</a>, <a href="delphi.html">Delphi</a>, <a href="scala.html">Scala</a>, <a href="obliq.html">Obliq</a></li>
<li >Read more about Modula-3 on the web: <a href="https://www.cs.purdue.edu/homes/hosking/m3/reference/syntax.html">1.</a></li></ul>
<br>
<div class="codeWithHeader"><div class="codeHeader">Example from <a href='https://github.com/leachim6/hello-world/blob/main/m/Modula 3.m3'>hello-world</a>:</div><code class="scrollCodeBlock">MODULE HelloWorld;
IMPORT Io;
BEGIN
    IO.Put (&quot;Hello World\n&quot;)
END HelloWorld.</code></div>
<div class="codeWithHeader"><div class="codeHeader">Example from <a href='http://helloworldcollection.de/#Modula-3'>the Hello World Collection</a>:</div><code class="scrollCodeBlock">(* Hello World in Modula-3 *)

MODULE Hello EXPORTS Main;

IMPORT IO;

BEGIN
 IO.Put(&quot;Hello World!\n&quot;);
END Hello.</code></div>
<div class="codeWithHeader"><div class="codeHeader">Example from <a href='https://github.com/newgrammars/m3'>Linguist</a>:</div><code class="scrollCodeBlock">(* Copyright (C) 1989, Digital Equipment Corporation           *)
(* All rights reserved.                                        *)
(* See the file COPYRIGHT for a full description.              *)

(* Last modified on Fri Jun 18 16:18:48 PDT 1993 by wobber         *)
(*      modified on Tue Jun 15 10:07:07 1993 by gnelson        *)
(*      modified on Fri May 21 09:50:56 PDT 1993 by swart      *)
(*      modified on Mon Apr 26 17:22:23 PDT 1993 by mcjones    *)
(*      modified on Wed Nov  6 10:45:09 PST 1991 by kalsow     *)
(*      modified on Fri Sep 28 23:12:34 1990 by muller         *)


(* The RdClass interface is analogous to the WrClass interface. It
reveals that every reader contains a buffer of characters together
with methods for managing the buffer.  New reader classes are created
by importing RdClass (to gain access to the buffer and the methods)
and then defining a subclass of Rd.T whose methods provide the new
class&#39;s behavior.  The opaque type Private hides irrelevant details of
the class-independent code. *)
   
INTERFACE RdClass;
IMPORT Rd;
FROM Thread IMPORT Alerted;
FROM Rd IMPORT Failure;

TYPE
  Private &lt;: ROOT;
  SeekResult = {Ready, WouldBlock, Eof};

REVEAL
  Rd.T =
    Private BRANDED OBJECT
      buff                 : REF ARRAY OF CHAR := NIL;
      Ungetbuff            : REF ARRAY OF CHAR := NIL;
      Waitingbuff          : REF ARRAY OF CHAR := NIL;
      st                   : CARDINAL;              (* index into buff *)
      Ungetst              : CARDINAL;              (* index into Ungetbuff *)
      Waitingst            : CARDINAL;              (* index into WaitingBuff *)
      cur                  : CARDINAL         := 0; (* index into src(rd) *)
      lo, hi               : CARDINAL         := 0; (* indexes into src(rd) *)
      Ungetlo, Ungethi     : CARDINAL         := 0; (* indexes into src(rd) *)
      Waitinglo, Waitinghi : CARDINAL         := 0; (* indexes into src(rd) *)
      closed: BOOLEAN := TRUE;   (* init method of the subtype should set
                                    this to FALSE *)
      seekable, intermittent: BOOLEAN;
    METHODS
      seek   (n: CARDINAL; dontBlock: BOOLEAN): SeekResult
                         RAISES {Failure, Alerted};
      (* ^rd is locked and not closed. *)
      getSub (VAR a: ARRAY OF CHAR): CARDINAL
                         RAISES {Failure, Alerted} := GetSubDefault;
      (* ^rd is locked and not closed. *)
      length (): INTEGER RAISES {Failure, Alerted} := LengthDefault;
      (* ^rd is locked and not closed. *)
      close  () RAISES {Failure, Alerted}          := CloseDefault;
    END;

(* Let rd be a reader, abstractly given by len(rd), src(rd), cur(rd),
avail(rd), closed(rd), seekable(rd), and intermittent(rd).  The data
fields cur, closed, seekable, and intermittent in the object represent
the corresponding abstract attributes of rd.  The buff, st, lo, and hi
fields represent a buffer that contains part of src(rd), the rest of
which is represented in some class-specific way.

More precisely, we say that the state of the representation is valid
if conditions V1 through V4 hold:

V1. the characters of buff in the range [st .. st+(hi-lo)] accurately
    reflect src.  That is,  for all i in [rd.lo .. rd.hi-1],
           
	rd.buff[rd.st + i - rd.lo] = src(rd)[i]

V2. the cur field is in or just past the end of the occupied part of the
    buffer, that is:

        rd.lo &lt;= rd.cur &lt;= rd.hi

V3. the reader does not claim to be both intermittent and seekable:

	NOT (rd.intermittent AND rd.seekable)

It is possible that buff = NIL in a valid state, since the range of
i&#39;s in V1 may be empty; for example, in case lo = hi.

V4. if closed(rd) then rd.buff = NIL AND rd.lo = rd.hi

If rd is valid and cur(rd) is less than rd.hi, we say the reader
is ready.  More precisely, rd is ready if:

   NOT rd.closed  AND  rd.buff # NIL  AND  rd.lo &lt;= rd.cur &lt; rd.hi

If the state is ready, then Rd.GetChar can be implemented by fetching
from the buffer.  Together V1, V2, and V4 imply that if rd.cur # rd.hi
then rd.buff # NIL and NOT rd.closed.  Therefore a valid reader is ready
if &quot;rd.cur # rd.hi&quot;.

The class-independent code modifies rd.cur, but no other variables
revealed in this interface (except that &quot;Rd.Close&quot; modifies &quot;rd.lo&quot; and
&quot;rd.cur&quot; and sets &quot;rd.buff&quot; to NIL in order to maintain invariant V4).  The
class-independent code locks the reader before calling any methods.

Here are the specifications for the methods:

The basic purpose of the seek method is to make the reader ready.  To
seek to a position n, the class-independent code checks whether the reader
would be ready with rd.cur = n and if so, simply sets rd.cur to n.
If not, it calls rd.seek supplying the position n as argument.
As in the case of writers, the seek method can be called even for an
unseekable reader in the special case of advancing to the next buffer.

The fields with names beginning with &quot;Unget&quot; describe a buffer of characters
retained in case they need to be reused by UngetChar.  The fields with names
beginning with &quot;Waiting&quot; are a buffer once supplied by class-dependent code
but temporarily suspended while characters originally saved in the unget
and then ungotten are being returned.  If NIL#Ungetbuff=buff, we are accessing
previously ungotten characters from Ungetbuff^, and Waitingbuff is the buffer
most recently provided by seek.  Otherwise, buff is the buffer most recently
provided by seek.  Either way, the fast path in class-independent code for
getting characters works the same, using buff, st, lo, and hi, as in the
earlier implementation, and ignoring the other buffer fields.

Similarly, (class-dependent) seek method bodies use only these same fields.
Only UngetChar and class-independent code surrounding seek method calls need
be aware of the additional two buffer pointers and their subscripts.

There is a wrinkle to support the implementation of CharsReady.  If rd
is ready, the class-independent code can handle the call to
CharsReady(rd) without calling any methods (since there is at least
one character ready in the buffer), but if rd.cur = rd.hi, then the
class independent code needs to find out from the class implementation
whether any characters are ready in the next buffer.  Using the seek
method to advance to the next buffer won&#39;t do, since this could block,
and CharsReady isn&#39;t supposed to block.  Therefore, the seek method
takes a boolean argument saying whether blocking is allowed. If
blocking is forbidden and the next buffer isn&#39;t ready, the method
returns the special value WouldBlock; this allows the
class-independent code to return zero from CharsReady.  The &quot;dontBlock&quot;
boolean should be &quot;TRUE&quot; only if the seek method is being used to advance
to the next buffer.

More precisely, given a valid state where

     (n # rd.hi) =&gt; rd.seekable
AND  (dontBlock =&gt; n = rd.hi)

the call res := rd.seek(n, dontBlock) establishes a valid state.
Furthermore, if res = Ready then rd is ready and rd.cur = n;
while if res = Eof, then rd.cur = len(rd); and finally if res = WouldBlock
then dontBlock was TRUE and avail(rd) = cur(rd).

The getSub method is used to implement Rd.GetSub and is
called with the reader lock held and the reader not closed.  Efficient
implementations override this method to avoid unnecessary copying by reading
directly from the reader source, bypassing the reader buffer.  The default
implementation is correct for any class, but always copies through
the reader buffer.

The length method returns the length of a non-intermittent reader.
That is: Given a valid state in which rd.intermittent is FALSE, the
call rd.length() returns len(rd) without changing the state of rd.  An
intermittent reader may return the length if it is known, or -1.

The close method releases all resources associated with rd.  The exact
meaning of this is class-specific.  &quot;Rd.Close&quot; sets the &quot;buff&quot; field
to &quot;NIL&quot;, so the method need not do this.  When the method is
called the state will be valid; validity is not required when the
method returns (since after it returns, the class-independent code
will set the closed bit in the reader, which makes the rest of
the state irrelevant).

The remainder of the interface is similar to the corresponding part
of the WrClass interface: *)

PROCEDURE Init(rd: Rd.T);
(* Class-independent initialize rd, including private fields revealed herein. *)

PROCEDURE Lock(rd: Rd.T) RAISES {};
(* The reader rd must be unlocked; lock it and make its state valid. *)

PROCEDURE Unlock(rd: Rd.T) RAISES {};
(* The reader rd must be locked and valid; unlock it and restore the
private invariant of the reader implementation. *)

PROCEDURE GetSubDefault(rd: Rd.T; VAR (*OUT*) str: ARRAY OF CHAR): CARDINAL
  RAISES {Failure, Alerted};
  (* rd is locked and not closed. *)
(* Implement &quot;getSub&quot; by copying from the buffer, calling the &quot;seek&quot;
   method as necessary.  Clients can override this in order to
   achieve greater efficiency; for example, by copying directly
   from the source of the reader into &quot;str&quot;. *)

PROCEDURE LengthDefault(rd: Rd.T): INTEGER RAISES {Failure, Alerted};
(* The procedure LengthDefault causes a checked runtime error; this
represents an error in the (non-intermittent) class implementation. *)

PROCEDURE CloseDefault(rd: Rd.T) RAISES {Failure, Alerted};
(* The procedure CloseDefault is a no-op. *)

END RdClass.

</code></div>
<div class="codeWithHeader"><div class="codeHeader">Example from <a href='https://en.wikipedia.org/wiki/Modula-3'>Wikipedia</a>:</div><code class="scrollCodeBlock">MODULE Person;

REVEAL T = Public BRANDED
OBJECT
  name: TEXT;   (* These two variables *)
  age: INTEGER; (* are private. *)
OVERRIDES
  getAge := Age;
  init := Init;
END;

PROCEDURE Age(self: T): INTEGER =
  BEGIN
    RETURN self.age;
  END Age;

PROCEDURE Init(self: T; name: TEXT; age: INTEGER): T =
  BEGIN
    self.name := name;
    self.age := age;
  RETURN self;
  END Init;

BEGIN
END Person.</code></div>
<div class="keywordsBlock">
<div class="codeWithHeader"><div class="codeHeader">Modula-3 <a href="../lists/keywords.html#q=modula-3">Keywords</a></div><code class="scrollCodeBlock">AND ANY ARRAY AS BEGIN BITS BRANDED BY CASE CONST DIV DO ELSE ELSIF END EVAL EXCEPT EXCEPTION EXIT EXPORTS FINALLY FOR FROM GENERIC IF IMPORT IN INTERFACE LOCK LOOP METHODS MOD MODULE NOT OBJECT OF OR OVERRIDES PROCEDURE RAISE RAISES READONLY RECORD REF REPEAT RETURN REVEAL SET THEN TO TRY TYPE TYPECASE UNSAFE UNTIL UNTRACED VALUE VAR WHILE WITH</code></div>
</div>
<div class="scrollSection"><h2 class="scrollParagraph">Language <a href="../lists/features.html">features</a></h2>
</div>
<table id="table509" class="scrollTable">
 <thead><tr><th>Feature</th>

<th>Supported</th>

<th>Token</th>

<th>Example</th>
</tr></thead>
 <tbody><tr><td><a href="../features/hasBooleans.html">Booleans</a></td>
<td><span class="hasFeature">âœ“</span></td>
<td>TRUE FALSE</td>
<td></td>
</tr>
<tr><td><a href="../features/hasMultiLineComments.html">MultiLine Comments</a></td>
<td><span class="hasFeature">âœ“</span></td>
<td>(* *)</td>
<td><pre>(* A comment
*)</pre></td>
</tr>
<tr><td><a href="../features/hasComments.html">Comments</a></td>
<td><span class="hasFeature">âœ“</span></td>
<td></td>
<td></td>
</tr>
<tr><td><a href="../features/hasCaseInsensitiveIdentifiers.html">Case Insensitive Identifiers</a></td>
<td><span class="doesNotHaveFeature">X</span></td>
<td></td>
<td></td>
</tr>
<tr><td><a href="../features/hasSemanticIndentation.html">Semantic Indentation</a></td>
<td><span class="doesNotHaveFeature">X</span></td>
<td></td>
<td></td>
</tr>
<tr><td><a href="../features/hasLineComments.html">Line Comments</a></td>
<td><span class="doesNotHaveFeature">X</span></td>
<td></td>
<td></td>
</tr></tbody>
 </table>
 <script>
 document.querySelector('#table509').addEventListener('click', e => {
  if (window.getSelection().toString() || e.target.closest('a') || !e.target.closest('tbody')) return;
  e.currentTarget.classList.toggle('expandedTable');
 });
 </script>
<div class="scrollKeyboardNav" style="display:none;"><a href="ooc.html">ooc.html</a> Â· modula-3.html Â· <a href="xojo.html">xojo.html</a><script>document.addEventListener('keydown', function(event) {
  if (document.activeElement !== document.body) return
  const getLinks = () => document.getElementsByClassName("scrollKeyboardNav")[0].getElementsByTagName("a")
  if (event.key === "ArrowLeft")
    getLinks()[0].click()
  else if (event.key === "ArrowRight")
    getLinks()[1].click()
 });</script></div>
</div>
<p class="scrollViewSource doNotPrint">
 <a href="https://github.com/breck7/pldb/blob/main/concepts/modula-3.scroll">View source</a>
</p>

<script>
document.addEventListener("DOMContentLoaded", () => document.querySelectorAll(".scrollCodeBlock").forEach(block =>
 {
  if (!navigator.clipboard) return
  const button = document.createElement("span")
  button.classList.add("scrollCopyButton")
  block.appendChild(button)
  button.addEventListener("click", async () => {
    await navigator.clipboard.writeText(block.innerText)
    button.classList.add("scrollCopiedButton")
  })
 }
))
</script>


<div class="trueBaseThemeFooter">
 <a href="../index.html" class="trueBaseThemeLogo">PLDB</a>
 <span>- Build the next great programming language</span>
 <span>Â·</span>
 <a href="../pages/about.html">About</a>
 <span>Â·</span>
 <a href="../lists/resources.html">Resources</a>
 <span>Â·</span>
 <a href="../pages/acknowledgements.html">Acknowledgements</a>
 <span>Â·</span>
 <a href="https://wws.scroll.pub">Part of the World Wide Scroll</a>
</div>

<script src="../lists/autocompleteCombined.js"></script>
<script>document.addEventListener("DOMContentLoaded", evt => initAutocomplete("trueBaseThemeHeaderSearch"))</script>
</body>
</html>