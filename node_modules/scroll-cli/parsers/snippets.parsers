endSnippetParser
 description Cut for snippet here.
 extends abstractScrollParser
 cruxFromId
 javascript
  compile() {
   return ""
  }

printSnippetsParser
 // todo: why are we extending AT here and not loops? Is it for class/id etc?
 extends abstractAftertextParser
 cruxFromId
 cells commandWordCell
 catchAllCellType tagWithOptionalFolderCell
 description Prints snippets in group(s).
 example
  printSnippets index
 javascript
  makeSnippet(file, compileSettings) {
    const {scrollProgram, endSnippetIndex} = file
    if (endSnippetIndex === -1) return scrollProgram.compileEmbeddedVersion(compileSettings) + file.viewSourceHtml
    const linkRelativeToCompileTarget = compileSettings.relativePath + file.permalink
    const joinChar = "\n"
    const html = scrollProgram
        .map((child, index) => (index >= endSnippetIndex ? "" : child.compileEmbeddedVersion ? child.compileEmbeddedVersion(compileSettings) : child.compile(compileSettings)))
        .filter(i => i)
        .join(joinChar)
        .trim() +
      `<a class="scrollContinueReadingLink" href="${linkRelativeToCompileTarget}">Continue reading...</a>`
    return html
  }
  get files() {
   const thisFile = this.parent.file
   return this.parent.file.getFilesWithTagsForEmbedding(this.getWordsFrom(1), this.has("limit") ? parseInt(this.get("limit")) : undefined).filter(file => file.file !== thisFile)
  }
  compile() {
   const alreadyRequired = this.root.alreadyRequired
   const snippets = this.files.map(file => {
    const compileSettings = {relativePath: file.relativePath, alreadyRequired }
    return `<div class="scrollSnippetContainer">${this.makeSnippet(file.file, compileSettings)}</div>`
    }).join("\n\n")
   return `<div class="scrollColumns" style="column-width:35ch;">${snippets}</div>`
  }
  compileTxt() {
   return this.files.map(file =>  {
    const title = file.file.title
    const ruler = "=".repeat(title.length)
    // Note: I tried to print the description here but the description generating code needs work.
    return `${title}\n${ruler}\n${file.file.date}\n${file.file.absoluteLink}`
   }).join("\n\n")
  }

printFullSnippetsParser
 extends printSnippetsParser
 cruxFromId
 description Print full pages in group(s).
 javascript
  makeSnippet(file, compileSettings) {
   return file.scrollProgram.compileEmbeddedVersion(compileSettings) + file.viewSourceHtml
  }

printRelatedParser
 description Print links to related posts.
 extends printSnippetsParser
 cruxFromId
 javascript
  makeSnippet(file, compileSettings) {
    // get title, permalink, and year
    const {title, permalink, year} = file
    const node = this.appendSibling(`- ${title}${year ? " (" + year + ")" : ""}`, `link ${permalink}`)
    // A hacky but simple way to do this for now.
    const html = node.compile()
    node.destroy()
    return html
  }